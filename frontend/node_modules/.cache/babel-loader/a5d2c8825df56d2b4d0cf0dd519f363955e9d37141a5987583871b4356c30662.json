{"ast":null,"code":"import _slicedToArray from\"/Users/Zainab/GA/after_GA/flamingo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route}from'react-router-dom';import ComplimentPage from'./Features/Compliment';import MusicPage from'./Features/MusicSection';import SignIn from'./User/SignIn';import SignUp from'./User/Signup';import Navbar from'./NavBar';import Main from'./Home/Main';import axios from'axios';import jwt_decode from'jwt-decode';// import './src/css/App.css';\n// import './src/css/Compliment.css';\n// import './src/css/MusicSection.css';\n// import './src/css/Sign.css';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAuth=_useState2[0],setIsAuth=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loaded=_useState6[0],setLoaded=_useState6[1];useEffect(function(){var token=localStorage.getItem('token');if(token!=null){var decodedUser=jwt_decode(token);if(decodedUser){setIsAuth(true);setUser(decodedUser);}else{localStorage.removeItem('token');setIsAuth(false);}}setLoaded(true);},[]);var registerHandler=function registerHandler(user){axios.post('/auth/signup',user).then(function(res){console.log(res);if(res.status===201){console.log('Sign up successful');// Redirect to the sign-in page after successful registration\nwindow.location.href='/signin';}}).catch(function(err){console.log(err.message);console.log('error in app.js');});};var loginHandler=function loginHandler(cred){axios.post('/signin',cred).then(function(res){console.log(res);console.log(res.data.token);console.log('You are logged in!');if(res.status===200){// Redirect to the home page after successful login\nwindow.location.href='/';}var token=res.data.token;if(token!=null){localStorage.setItem('token',token);var decodedUser=jwt_decode(token);setIsAuth(true);setUser(decodedUser);console.log(decodedUser);}}).catch(function(error){console.log(error);console.log('error in login page app.js');});};var logoutHandler=function logoutHandler(e){e.preventDefault();localStorage.removeItem('token');setIsAuth(false);setUser({});window.location.href='/';// Redirect to the home page\n};if(!loaded){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// Show a loading message or spinner while authentication status is being determined\n}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Navbar,{isAuth:isAuth,logoutHandler:logoutHandler}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/flamingo\",element:/*#__PURE__*/_jsx(Main,{})}),/*#__PURE__*/_jsx(Route,{path:\"/compliment\",element:isAuth?/*#__PURE__*/_jsx(ComplimentPage,{user:user}):/*#__PURE__*/_jsx(SignIn,{login:loginHandler})}),/*#__PURE__*/_jsx(Route,{path:\"/music\",element:isAuth?/*#__PURE__*/_jsx(MusicPage,{user:user}):/*#__PURE__*/_jsx(SignIn,{login:loginHandler})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUp,{register:registerHandler})}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",element:/*#__PURE__*/_jsx(SignIn,{login:loginHandler})})]})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","ComplimentPage","MusicPage","SignIn","SignUp","Navbar","Main","axios","jwt_decode","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","isAuth","setIsAuth","_useState3","_useState4","user","setUser","_useState5","_useState6","loaded","setLoaded","token","localStorage","getItem","decodedUser","removeItem","registerHandler","post","then","res","console","log","status","window","location","href","catch","err","message","loginHandler","cred","data","setItem","error","logoutHandler","e","preventDefault","children","className","path","element","login","register"],"sources":["/Users/Zainab/GA/after_GA/flamingo/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport ComplimentPage from './Features/Compliment';\nimport MusicPage from './Features/MusicSection';\nimport SignIn from './User/SignIn';\nimport SignUp from './User/Signup';\nimport Navbar from './NavBar';\nimport Main from './Home/Main';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\n\n// import './src/css/App.css';\n// import './src/css/Compliment.css';\n// import './src/css/MusicSection.css';\n// import './src/css/Sign.css';\n\nconst App = () => {\n  const [isAuth, setIsAuth] = useState(false);\n  const [user, setUser] = useState({});\n  const [loaded, setLoaded] = useState(false);\n\n  useEffect(() => {\n    let token = localStorage.getItem('token');\n    if (token != null) {\n      let decodedUser = jwt_decode(token);\n\n      if (decodedUser) {\n        setIsAuth(true);\n        setUser(decodedUser);\n      } else {\n        localStorage.removeItem('token');\n        setIsAuth(false);\n      }\n    }\n    setLoaded(true);\n  }, []);\n\n  const registerHandler = (user) => {\n    axios\n      .post('/auth/signup', user)\n      .then((res) => {\n        console.log(res);\n\n        if (res.status === 201) {\n          console.log('Sign up successful');\n          // Redirect to the sign-in page after successful registration\n          window.location.href = '/signin';\n        }\n      })\n      .catch((err) => {\n        console.log(err.message);\n        console.log('error in app.js');\n      });\n  };\n\n  const loginHandler = (cred) => {\n    axios\n      .post('/signin', cred)\n      .then((res) => {\n        console.log(res);\n        console.log(res.data.token);\n        console.log('You are logged in!');\n\n        if (res.status === 200) {\n          // Redirect to the home page after successful login\n          window.location.href = '/';\n        }\n\n        let token = res.data.token;\n        if (token != null) {\n          localStorage.setItem('token', token);\n          let decodedUser = jwt_decode(token);\n          setIsAuth(true);\n          setUser(decodedUser);\n          console.log(decodedUser);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n        console.log('error in login page app.js');\n      });\n  };\n\n  const logoutHandler = (e) => {\n    e.preventDefault();\n    localStorage.removeItem('token');\n    setIsAuth(false);\n    setUser({});\n    window.location.href = '/'; // Redirect to the home page\n  };\n\n  if (!loaded) {\n    return <div>Loading...</div>; // Show a loading message or spinner while authentication status is being determined\n  }\n\n  return (\n    <Router>\n      <div className=\"app\">\n        <Navbar isAuth={isAuth} logoutHandler={logoutHandler} />\n        <Routes>\n        <Route path=\"/flamingo\" element={<Main />} />\n                  <Route\n            path=\"/compliment\"\n            element={isAuth ? <ComplimentPage user={user} /> : <SignIn login={loginHandler} />}\n          />\n          <Route\n            path=\"/music\"\n            element={isAuth ? <MusicPage user={user} /> : <SignIn login={loginHandler} />}\n          />\n          <Route path=\"/signup\" element={<SignUp register={registerHandler} />} />\n          <Route path=\"/signin\" element={<SignIn login={loginHandler} />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;"],"mappings":"wHAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,KAAQ,kBAAkB,CACzE,MAAO,CAAAC,cAAc,KAAM,uBAAuB,CAClD,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,MAAO,CAAAC,MAAM,KAAM,eAAe,CAClC,MAAO,CAAAC,MAAM,KAAM,eAAe,CAClC,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,IAAI,KAAM,aAAa,CAC9B,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,UAAU,KAAM,YAAY,CAEnC;AACA;AACA;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEA,GAAM,CAAAC,GAAG,CAAG,QAAN,CAAAA,GAAGA,CAAA,CAAS,CAChB,IAAAC,SAAA,CAA4BnB,QAAQ,CAAC,KAAK,CAAC,CAAAoB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAApCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,IAAAI,UAAA,CAAwBxB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAyB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAA4B5B,QAAQ,CAAC,KAAK,CAAC,CAAA6B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAApCE,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IAExB5B,SAAS,CAAC,UAAM,CACd,GAAI,CAAA+B,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzC,GAAIF,KAAK,EAAI,IAAI,CAAE,CACjB,GAAI,CAAAG,WAAW,CAAGtB,UAAU,CAACmB,KAAK,CAAC,CAEnC,GAAIG,WAAW,CAAE,CACfZ,SAAS,CAAC,IAAI,CAAC,CACfI,OAAO,CAACQ,WAAW,CAAC,CACtB,CAAC,IAAM,CACLF,YAAY,CAACG,UAAU,CAAC,OAAO,CAAC,CAChCb,SAAS,CAAC,KAAK,CAAC,CAClB,CACF,CACAQ,SAAS,CAAC,IAAI,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAM,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIX,IAAI,CAAK,CAChCd,KAAK,CACF0B,IAAI,CAAC,cAAc,CAAEZ,IAAI,CAAC,CAC1Ba,IAAI,CAAC,SAACC,GAAG,CAAK,CACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAEhB,GAAIA,GAAG,CAACG,MAAM,GAAK,GAAG,CAAE,CACtBF,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACjC;AACAE,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,SAAS,CAClC,CACF,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,GAAG,CAAK,CACdP,OAAO,CAACC,GAAG,CAACM,GAAG,CAACC,OAAO,CAAC,CACxBR,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC,CAChC,CAAC,CAAC,CACN,CAAC,CAED,GAAM,CAAAQ,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,IAAI,CAAK,CAC7BvC,KAAK,CACF0B,IAAI,CAAC,SAAS,CAAEa,IAAI,CAAC,CACrBZ,IAAI,CAAC,SAACC,GAAG,CAAK,CACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACY,IAAI,CAACpB,KAAK,CAAC,CAC3BS,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CAEjC,GAAIF,GAAG,CAACG,MAAM,GAAK,GAAG,CAAE,CACtB;AACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAG,CAC5B,CAEA,GAAI,CAAAd,KAAK,CAAGQ,GAAG,CAACY,IAAI,CAACpB,KAAK,CAC1B,GAAIA,KAAK,EAAI,IAAI,CAAE,CACjBC,YAAY,CAACoB,OAAO,CAAC,OAAO,CAAErB,KAAK,CAAC,CACpC,GAAI,CAAAG,WAAW,CAAGtB,UAAU,CAACmB,KAAK,CAAC,CACnCT,SAAS,CAAC,IAAI,CAAC,CACfI,OAAO,CAACQ,WAAW,CAAC,CACpBM,OAAO,CAACC,GAAG,CAACP,WAAW,CAAC,CAC1B,CACF,CAAC,CAAC,CACDY,KAAK,CAAC,SAACO,KAAK,CAAK,CAChBb,OAAO,CAACC,GAAG,CAACY,KAAK,CAAC,CAClBb,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC,CAC3C,CAAC,CAAC,CACN,CAAC,CAED,GAAM,CAAAa,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,CAAC,CAAK,CAC3BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBxB,YAAY,CAACG,UAAU,CAAC,OAAO,CAAC,CAChCb,SAAS,CAAC,KAAK,CAAC,CAChBI,OAAO,CAAC,CAAC,CAAC,CAAC,CACXiB,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAG,CAAE;AAC9B,CAAC,CAED,GAAI,CAAChB,MAAM,CAAE,CACX,mBAAOf,IAAA,QAAA2C,QAAA,CAAK,YAAU,CAAK,CAAC,CAAE;AAChC,CAEA,mBACE3C,IAAA,CAACZ,MAAM,EAAAuD,QAAA,cACLzC,KAAA,QAAK0C,SAAS,CAAC,KAAK,CAAAD,QAAA,eAClB3C,IAAA,CAACL,MAAM,EAACY,MAAM,CAAEA,MAAO,CAACiC,aAAa,CAAEA,aAAc,CAAE,CAAC,cACxDtC,KAAA,CAACb,MAAM,EAAAsD,QAAA,eACP3C,IAAA,CAACV,KAAK,EAACuD,IAAI,CAAC,WAAW,CAACC,OAAO,cAAE9C,IAAA,CAACJ,IAAI,GAAE,CAAE,CAAE,CAAC,cACnCI,IAAA,CAACV,KAAK,EACZuD,IAAI,CAAC,aAAa,CAClBC,OAAO,CAAEvC,MAAM,cAAGP,IAAA,CAACT,cAAc,EAACoB,IAAI,CAAEA,IAAK,CAAE,CAAC,cAAGX,IAAA,CAACP,MAAM,EAACsD,KAAK,CAAEZ,YAAa,CAAE,CAAE,CACpF,CAAC,cACFnC,IAAA,CAACV,KAAK,EACJuD,IAAI,CAAC,QAAQ,CACbC,OAAO,CAAEvC,MAAM,cAAGP,IAAA,CAACR,SAAS,EAACmB,IAAI,CAAEA,IAAK,CAAE,CAAC,cAAGX,IAAA,CAACP,MAAM,EAACsD,KAAK,CAAEZ,YAAa,CAAE,CAAE,CAC/E,CAAC,cACFnC,IAAA,CAACV,KAAK,EAACuD,IAAI,CAAC,SAAS,CAACC,OAAO,cAAE9C,IAAA,CAACN,MAAM,EAACsD,QAAQ,CAAE1B,eAAgB,CAAE,CAAE,CAAE,CAAC,cACxEtB,IAAA,CAACV,KAAK,EAACuD,IAAI,CAAC,SAAS,CAACC,OAAO,cAAE9C,IAAA,CAACP,MAAM,EAACsD,KAAK,CAAEZ,YAAa,CAAE,CAAE,CAAE,CAAC,EAC5D,CAAC,EACN,CAAC,CACA,CAAC,CAEb,CAAC,CAED,cAAe,CAAAhC,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}